document.getStyle=function(b,a){if(b.currentStyle){return b.currentStyle[a]}else{if(window.getComputedStyle){return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}}return false};if(typeof document.getElementsByClassName!="function"){document.getElementsByClassName=function(e){var a,d=new Array(),b=0,f;if(this.all){a=this.all}else{if(this.getElementsByTagName&&!this.all){a=this.getElementsByTagName("*")}}for(var c=0;c<a.length;c++){if(a[c].className.indexOf(e)!=-1){f=","+a[c].className.split(" ").join(",")+",";if(f.indexOf(","+e+",")!=-1){d[b]=a[c];b++}}}return d}}document.getTarget=function(a){a=a||window.event;return a.target||a.srcElement||false};if(window.Node&&Node.prototype&&!Node.prototype.contains){Node.prototype.contains=function(a){try{return !!(this.compareDocumentPosition(a)&16)}catch(b){return false}}}document.createInputElementWithAttributes=function(c,a,f){if(c.toLowerCase()!="input"&&c.toLowerCase()!="button"){return}var e=false;var d=false;for(var b=0;b<a.length;b++){if(a[b][0].toLowerCase()=="type"){e=a[b][1];break}}if(e){try{var d=document.createElement(c);d.type=e}catch(g){var d=document.createElement("<"+c+' type="'+e+'">')}}d=d||document.createElement(c);for(var b=0;b<a.length;b++){if(a[b][0].toLowerCase()!="type"){d[a[b][0]]=a[b][1]}}if(f){f.appendChild(d)}return d};document.createElementWithAttributes=function(c,a,e){if(c.toLowerCase()=="input"||c.toLowerCase()=="button"){return document.createInputElementWithAttributes(c,a,e)}var d=document.createElement(c);for(var b=0;b<a.length;b++){d[a[b][0]]=a[b][1]}if(e){e.appendChild(d)}return d};document.getWindowSize=function(){var a=0,b=0;if(window.innerWidth){a=window.innerWidth;b=window.innerHeight}else{if(document.body&&document.body.offsetWidth){a=document.body.offsetWidth;b=document.body.offsetHeight}}return{width:a,height:b}};document.getKeyCode=function(a){a=a||window.event;if((typeof a.which=="undefined"||(typeof a.which=="number"&&a.which==0))&&typeof a.keyCode=="number"){return a.keyCode}else{return a.which}};document.getElementPoSi=function(a){var b={top:0,left:0,width:0,height:0};if(!a||typeof(a)!="object"){return b}if(typeof(a.offsetTop)!="undefined"){b.height=a.offsetHeight;b.width=a.offsetWidth;b.left=b.top=0;while(a&&a.tagName!="BODY"){b.top+=parseInt(a.offsetTop);b.left+=parseInt(a.offsetLeft);a=a.offsetParent}}return b};document.getFirstChildByElement=function(d,c,b){if(b&&typeof(b)!="object"){b=[b]}if(d&&d.hasChildNodes()){var e=d.firstChild;while(e!=null){if(e.nodeName.toLowerCase()==c){if(!b){return e}else{var f=","+e.className.split(" ").join(",")+",";for(var a=0;a<b.length;a++){if(f.indexOf(","+b[a]+",")!=-1){return e}}}}e=e.nextSibling}}return null};document.getMousePos=function(b){if(!b){b=window.event}var a=(window.document.compatMode&&window.document.compatMode=="CSS1Compat")?window.document.documentElement:window.document.body;return{top:b.pageY?b.pageY:b.clientY+a.scrollTop-a.clientTop,left:b.pageX?b.pageX:b.clientX+a.scrollLeft-a.clientLeft}};if(typeof String.prototype.trim!="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.containsLineBreak=function(){var a=new RegExp(/(\n|\r|\r\n)./);return a.test(this)};String.prototype.stripslashes=function(){var a=this;a=a.replace(/\\'/g,"'");a=a.replace(/\\"/g,'"');a=a.replace(/\\0/g,"\0");a=a.replace(/\\\\/g,"\\");return a};var ready=new (function(){var g=0,f=document,b=window,c=this,a;c.isReady=0;c.readyList=[];function e(){if(g){return}g=1;if(f.addEventListener){a="DOMContentLoaded";f.addEventListener(a,function(){f.removeEventListener(a,arguments.callee,false);ready.ready()},false)}else{if(f.attachEvent){a="onreadystatechange";f.attachEvent(a,function(){if(f.readyState==="complete"){f.detachEvent(a,arguments.callee);ready.ready()}});if(f.documentElement.doScroll&&b==b.top){(function(){if(c.isReady){return}try{f.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}ready.ready()})()}}}b.onload=ready.ready}c.ready=function(){if(!c.isReady){c.isReady=1;if(c.readyList){for(var d=0;d<c.readyList.length;d++){c.readyList[d].call(b,c)}c.readyList=null}f.loaded=true}};c.push=function(d){e();if(c.isReady){d.call(b,c)}else{c.readyList.push(d)}return c}})();function Query(b,a){a=a||"";var c=b.trim();var d=encodeURIComponent(a.toString().trim());this.toString=function(){return c+"="+d+"&"}}function Request(c,h,a,n,g,p,d,b){p=p?(typeof p=="object"?p:[p]):[];d=d||false;b=b?b:d?"text/xml":"text/plain";n=n||null;var l=false;try{if(window.XMLHttpRequest){l=new XMLHttpRequest()}if(l.overrideMimeType){l.overrideMimeType(b)}else{if(window.ActiveXObject){try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(o){l=false}}}}}catch(j){l=false}if(!l){if(n&&typeof n[g]=="function"){n[g](false,p)}return}var f="";if(a instanceof Query){f=a.toString()}else{if(typeof a=="object"&&a.length>0){for(var k=0;k<a.length;k++){f+=a[k].toString()}}}f+=new Date().getTime();l.abort();l.onreadystatechange=function(){if(l.readyState==4){if(n&&typeof n[g]=="function"){n[g]((d?l.responseXML:l.responseText),p)}l=false}};if(h.toLowerCase()=="post"){l.open("POST",c,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.send(f)}else{l.open("GET",c+"?"+f,true);l.send(null)}}function Sidebar(g){g=g||"";var a=document.getElementById("sidebar")||document.getElementById("bottombar")||false;var f=document.getElementById("sidebarcontent");var e=document.getElementById("sidebartoggle");var c=this;if(!a||!f||!e){return}this.setVisible=function(h){if(h){f.style.display="";e.src=g+settings.hide_sidebar_image;e.className="hide-sidebar"}else{f.style.display="none";e.src=g+settings.show_sidebar_image;e.className="show-sidebar"}};this.isVisible=function(){return f.style.display!="none"};var b=a.getElementsByTagName("a");for(var d=0;d<b.length;d++){if(b[d].href.search(/toggle_sidebar/)!=-1){b[d].onclick=function(h){c.setVisible(!c.isVisible());new Request("index.php","POST",new Query("toggle_sidebar",true));return false}}}}function Thread(h,l){if(!isNaN(parseInt(h))){e=h;h=document.getElementById("thread-"+e)}else{var f=new RegExp(/thread-([0-9])+/);var a=f.exec(h.id);if(!a){return}var e=a&&a.length>1?a[1]:0}var n=h.getElementsByTagName("li");var m=h.getElementsByTagName("ul");var o=this;var k=new Image();var b=null;if(h.parentNode.nodeName!="TD"){var g=document.getFirstChildByElement(n[0],"span",["tail"]);if(g&&n.length>1){b=document.getFirstChildByElement(g,"span",["replies"]);if(!b){b=document.createElementWithAttributes("span",[["className","replies"]],g);b.appendChild(document.createTextNode(" ("+(n.length-1)+")"))}}}this.isFold=function(){return m.length>0&&m[0].style.display=="none"};this.setFold=function(r,q){q=q||false;if(r){k.src=l+settings.expand_thread_image;k.className="expand-thread";k.alt="";k.onerror=function(t){this.alt="[+]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.style.display=""}if(q){h.className=h.className.replace("expanded","folded")}}else{k.src=l+settings.fold_thread_image;k.className="fold-thread";k.alt="";k.onerror=function(t){this.alt="[-]"};k.title=lang.expand_fold_thread_linktitle;if(b){b.style.display="none"}if(q){h.className=h.className.replace("folded","expanded")}}var p=r?"none":"";for(var s=0;s<m.length;s++){m[s].style.display=p}};var c=function(p){if(!p){return}if(n.length>0&&n[0].firstChild){n[0].insertBefore(p,n[0].firstChild)}else{n[0].appendChild(p)}};var d=document.createElementWithAttributes("span",[["className","fold-expand"]],null);if(n.length==1){var i=document.createElementWithAttributes("img",[["src",l+settings.expand_thread_inactive_image],["alt",""],["onerror",function(p){this.alt="[]"}]],d);c(d)}else{var j=document.createElementWithAttributes("a",[["href","#"],["onclick",function(p){o.setFold(!o.isFold());this.blur();return false}]],d);this.setFold(this.isFold());j.appendChild(k);c(d)}}function Posting(b){if(!b){return}var d=document.getElementById("headline-"+b);var c=document.getElementById("posting-"+b);var g=document.getElementById("avatar-"+b)||new Image();if(!d||!c){return}var a=this;try{d.style.cursor="pointer"}catch(f){d.style.cursor="hand"}d.title=lang.fold_posting_title;d.onclick=function(h){a.setFold(!a.isFold())};this.isFold=function(){return c.style.display=="none"};this.setFold=function(h){var e=h?"none":"";c.style.display=e;g.style.display=e};this.setFold(this.isFold())}function AjaxPreviewWindow(c,n){var n=n?n:"";var e=false;var h=document.getElementById("ajax-preview");var o=this;if(!h){h=document.createElementWithAttributes("div",[["id","ajax-preview"]],null);h.style.display="none";document.body.appendChild(h)}h.innerHTML=c.stripslashes().trim();var j=null;var l=0;var f=document.getElementById("ajax-preview-close");var b=document.getElementById("ajax-preview-content");var m=document.getElementById("ajax-preview-main");if(!f||!b||!m){window.alert("AjaxPreviewWindow kann nicht erzeugt werden!")}var i=window.document.onmousedown;window.document.onmousedown=function(p){o.closeByOutSideClick(p);if(typeof i=="function"){i(p)}};var k=window.document.onmousedown;window.document.onkeypress=function(q){var p=document.getKeyCode(q);if(p==27){o.setVisible(false)}if(typeof k=="function"){k(q)}};f.onclick=function(){o.setVisible(false);return false};var a=document.createElementWithAttributes("img",[["id","ajax-preview-throbber"],["src",n+settings.ajax_preview_throbber_image],["alt","[*]"]],b);var g=document.createElementWithAttributes("p",[["id","ajax-preview-replylink-wrapper"]],b);var d=document.createElementWithAttributes("a",[["id","ajax-preview-replylink"],["href","#"]],null);d.appendChild(document.createTextNode(lang.reply_link));g.style.display="none";this.closeByOutSideClick=function(u){if(o.isVisible()){var s=document.getTarget(u);if(s&&s!=o.getOpener().firstChild){var r=document.getMousePos(u);var q=r.left;var p=r.top;var x=o.getDocumentPosition().left;var w=o.getDocumentPosition().top;var t=o.getWidth();var v=o.getHeight();if((q<x||q>(x+t)||p<w||p>(w+v))&&s.className!="ap"){o.setVisible(false)}}}};this.hideURI=function(p){e=p};this.setPosition=function(q,s){h.style.left=q+"px";h.style.top=s+"px";var r=this.getWidth();var p=document.getWindowSize().width;if((q+r)>=p){this.moveHorizontal(p-25-(q+r))}else{this.moveHorizontal(0)}};this.getWidth=function(){return m.offsetWidth};this.getHeight=function(){return h.offsetHeight+m.offsetHeight};this.setOpener=function(p){j=p};this.getOpener=function(){return j};this.isVisible=function(){return h.style.display!="none"};this.getDocumentPosition=function(){var q=h.offsetLeft;var p=h.offsetTop;return{top:p,left:q+l}};this.moveHorizontal=function(p){l=p;m.style.left=p+"px"};this.setVisible=function(p){if(p){h.style.display="block"}else{h.style.display="none"}};this.setText=function(p){b.innerHTML=p;if(p!=""){if(!d.firstChild){d.appendChild(document.createTextNode(lang.reply_link))}if(!e){g.appendChild(d);b.appendChild(g)}}else{b.appendChild(a)}};this.setURI=function(p){if(!p){d.href="#";g.style.display="none"}else{g.style.display="block";d.href=p}}}function MyLittleJavaScript(){var q=null;var i=null;var s="index.php";var o=[];var b=[];var g=new RegExp(/[?|&]id=([0-9]+)(#p([0-9]+))?/);var k=this;var e=function(t){if(t&&g.test(t.href)){var u=g.exec(t.href);return u[3]?u[3]:u[1]}return false};this.getTemplatePath=function(){if(q!=null){return q}var u=document.getElementsByTagName("link");for(var t=0;t<u.length;t++){if(u[t].rel=="stylesheet"){return u[t].href.substring(0,u[t].href.lastIndexOf("/")+1)}}return""};var m=function(v){var u=document.createElementWithAttributes("a",[["pid",v],["title",lang.ajax_preview_title],["href",s+"?id="+v],["onclick",function(w){k.showAjaxPreviewWindow(this);this.blur();return false}]],null);var t=document.createElementWithAttributes("img",[["src",q+settings.ajax_preview_image],["title",lang.ajax_preview_title],["alt",""],["onload",function(w){this.alt="[…]"}],["onerror",function(w){this.alt="[…]"}]],u);return u};var f=function(u){if(!u||!i){return}var t=e(u);if(t&&u.parentNode){u.parentNode.appendChild(document.createTextNode(String.fromCharCode(160)));u.parentNode.appendChild(m(t))}};var c=function(u){if(!u||!i){return}i.hideURI(true);var v=document.getElementById("postingform");var t=false;if(v&&v.elements.id){t=parseInt(v.elements.id.value)}if(t){u.appendChild(document.createTextNode(String.fromCharCode(160)));u.appendChild(m(t))}};this.selectPosting=function(u,t){var v=t&&typeof t=="object"&&t.length>0;var y=v?t[0]:u;var x=v?u:false;var w=null;if(!y||!(w=document.getElementById("markimg_"+y))){return}w.src=q+settings.mark_process_image;w.alt="[ ]";var z=[new Query("mode","posting"),new Query("mark",y),new Query("method","ajax")];if(!v){new Request(s,"POST",z,this,"selectPosting",y,true)}else{if(v&&x&&document.getElementById("marklink_"+y)){var A=document.getElementById("marklink_"+y);var B=x.getElementsByTagName("action")&&x.getElementsByTagName("action")[0].firstChild.data=="1";if(B){w.src=q+settings.marked_image;w.alt="[●]";A.title=lang.unmark_linktitle;w.title=lang.unmark_linktitle}else{w.src=q+settings.unmarked_image;w.alt="[○]";A.title=lang.mark_linktitle;w.title=lang.mark_linktitle}}}};var h=function(v){v=v||false;for(var u=0;u<o.length;u++){o[u].setFold(!v,true)}var t=[new Query("fold_threads",v),new Query("ajax","true")];new Request(s,"GET",t)};var r=function(){if(!document.getElementById("subnavmenu")){return}var v=document.getElementById("subnavmenu").getElementsByTagName("a");var w=null;var y=new RegExp(/fold-([0-9])+/);for(var u=0;u<v.length;u++){if(v[u].className.search(y)!=-1){w=v[u];break}}if(w){var x=y.exec(w.className);var t=x.length>1&&x[1]=="1";w.onclick=function(z){h(!t);this.className=this.className.replace(y,"fold-"+(t?2:1));this.firstChild.replaceData(0,this.firstChild.nodeValue.length,(t?lang.expand_threads:lang.fold_threads));this.title=t?lang.expand_threads_linktitle:lang.fold_threads_linktitle;t=!t;this.blur();return false}}};var n=function(w){if(!w){return}r();for(var y=0;y<w.length;y++){var t=w[y];var B=t.parentNode;var v=document.getFirstChildByElement(B,"a",["ap","reply","thread","replynew","threadnew","thread-sticky","threadnew-sticky","reply-search","thread-search"]);var z=parseInt(t.id.substring(1));if(!z){continue}var C=t.getElementsByTagName("a");if(C.length>=2){for(var x=0;x<C.length;x++){if(C[x].href.search(/mark/)!=-1){C[x].pid=z;C[x].onclick=function(D){k.selectPosting(this.pid);this.blur();return false}}else{if(C[x].href.search(/delete_posting/)!=-1){C[x].onclick=function(D){var E=window.confirm(lang.delete_posting_confirm);if(E){this.href+="&delete_posting_confirm=true"}this.blur();return E}}}}}if(v&&i){if(C.length>=1){var A=C[0];t.insertBefore(m(z),A);t.insertBefore(document.createTextNode(String.fromCharCode(160)),A)}else{t.appendChild(document.createTextNode(String.fromCharCode(160)));t.appendChild(m(z))}}if(B.parentNode.className.search(/thread/)!=-1&&B.parentNode.className.search(/[folded|expanded]/)!=-1){o.push(new Thread(B.parentNode,q))}}var u=document.getElementsByClassName("options");if(u.length>0){for(var y=0;y<u.length;y++){var C=u[y].getElementsByTagName("a");if(C.length>0){for(var x=0;x<C.length;x++){if(C[x].href.search(/delete_posting/)!=-1){C[x].onclick=function(D){var E=window.confirm(lang.delete_posting_confirm);if(E){this.href+="&delete_posting_confirm=true"}return E};break}}}}}};var p=function(v){var t=document.getElementById(v);if(!t){return}var u=t.value;t.onfocus=function(w){if(this.value==u){this.value=""}};t.onblur=function(w){if(this.value.trim()==""){this.value=u}}};var d=function(){if(document.getElementById("content")){var u=document.getElementById("content").getElementsByTagName("form");if(u&&u.length>0){for(var t=0;t<u[0].elements.length;t++){if(u[0].elements[t].type=="text"&&u[0].elements[t].name!="search_user"&&u[0].elements[t].name!="smiley_code"&&u[0].elements[t].name!="new_category"){u[0].elements[t].focus();break}}}}};var a=function(u){u=u||false;for(var t=0;t<b.length;t++){b[t].setFold(!u)}};var j=function(w){if(!w){return}for(var v=0;v<w.length;v++){var x=w[v];var u=parseInt(x.id.substring(1));if(!u){continue}b.push(new Posting(u))}var z=null;if(b.length==0||!(z=document.getElementById("subnavmenu"))){return}var t=document.createElementWithAttributes("li",[],z);var y=document.createElementWithAttributes("a",[["isExpand",true],["title",lang.fold_postings_title],["href","#"],["className","fold-postings"]],t);y.appendChild(document.createTextNode(lang.fold_postings));y.onclick=function(A){this.isExpand=!this.isExpand;a(this.isExpand);this.blur();return false}};var l=function(){var z=[[document.getElementById("terms_of_use")||false,settings.terms_of_use_popup_width,settings.terms_of_use_popup_height],[document.getElementById("edit_avatar")||false,settings.avatar_popup_width,settings.avatar_popup_height]];for(var y=0;y<z.length;y++){if(z[y][0]){var B=document.getWindowSize();var v=z[y][1];var A=z[y][2];var u=parseInt(0.5*(B.width-v));var x=parseInt(0.25*(B.height-A));z[y][0].onclick=function(t){window.open(this.href,"MyLittleForum","width="+v+",height="+A+",left="+u+",top="+x+",scrollbars,resizable");return false}}}};this.updateAjaxPreviewWindow=function(t){if(t===false||!i){return}var u=t.getElementsByTagName("content");var v=t.getElementsByTagName("locked");v=!v?true:v[0].firstChild.data=="1";u=!u?"":u[0].firstChild.data;if(v){i.setURI(false)}else{i.setURI("index.php?mode=posting&id="+i.getOpener().pid)}if(u.trim()==""){u="<p>"+lang.no_text+"</p>"}i.setText(u)};this.showAjaxPreviewWindow=function(v){if(!v||!i){return}if(v==i.getOpener()&&i.isVisible()){i.setVisible(false);i.setOpener(null)}else{var u=document.getElementPoSi(v);i.setOpener(v);i.setText("");i.setVisible(true);i.setPosition(u.left,u.top);var t=[new Query("mode","entry"),new Query("ajax_preview","true"),new Query("id",v.pid)];new Request(s,"POST",t,this,"updateAjaxPreviewWindow",null,true)}};this.getAjaxPreviewWindow=function(){return i};this.init=function(t){t=t||false;d();p("search-input");p("search-user");q=this.getTemplatePath();if(t){i=new AjaxPreviewWindow(t,q)}f(document.getElementById("user-last-posting"));c(document.getElementById("reply-to"));n(document.getElementsByClassName("tail"));j(document.getElementsByClassName("thread-posting"));l()}}var mlf=null;window.ready.push(function(){mlf=new MyLittleJavaScript();var a=typeof settings.ajaxPreviewStructure=="string"?settings.ajaxPreviewStructure:false;if(mlf&&typeof lang=="object"){mlf.init(a);new Sidebar(mlf.getTemplatePath())}});